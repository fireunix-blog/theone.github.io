<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;zh-TW&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>PowerDNS Recursor配置文件 | TheONE'Blog</title><meta name="keywords" content="PowerDNS,Recursor,Config"><meta name="author" content="The One"><meta name="copyright" content="The One"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="写在前面最近要开发多数据中心DNS管理平台，目前公司选型使用的是PowerDNS。每个数据中心都部署了一套PowerDNS Recursor，另外部分数据中心部署了PowerDNS Authoritative。其中多个数据中心可能会共用一套Authoritative。 首先简单看了一下Recursor配置，发现配置参数还是挺多的。本着工于利其事，必先利其器的原则，本文章对PowerDNS中的所有"><meta property="og:type" content="article"><meta property="og:title" content="PowerDNS Recursor配置文件"><meta property="og:url" content="https://theone.x-matrix.in/service/use/pdns/crecursor/index.html"><meta property="og:site_name" content="TheONE&#39;Blog"><meta property="og:description" content="写在前面最近要开发多数据中心DNS管理平台，目前公司选型使用的是PowerDNS。每个数据中心都部署了一套PowerDNS Recursor，另外部分数据中心部署了PowerDNS Authoritative。其中多个数据中心可能会共用一套Authoritative。 首先简单看了一下Recursor配置，发现配置参数还是挺多的。本着工于利其事，必先利其器的原则，本文章对PowerDNS中的所有"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://theone.x-matrix.in/images/pdns-crecursor/cover.jpg"><meta property="article:published_time" content="2024-08-08T10:30:10.000Z"><meta property="article:modified_time" content="2024-08-08T10:19:25.613Z"><meta property="article:author" content="The One"><meta property="article:tag" content="PowerDNS"><meta property="article:tag" content="Recursor"><meta property="article:tag" content="Config"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://theone.x-matrix.in/images/pdns-crecursor/cover.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://theone.x-matrix.in/service/use/pdns/crecursor/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//static.cloudflareinsights.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script defer data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;492e83a66c304bb490fec26c50c174b4&quot;}"></script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"XM5IGBOZS4",apiKey:"51ecc4759e9a7840f69f1b8eb5dd1199",indexName:"hexo",hits:{per_page:10},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:void 0,noticeOutdate:{limitDay:180,position:"top",messagePrev:"距离这篇文章发布已经过去",messageNext:"天, 内容有可能过期了."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"PowerDNS Recursor配置文件",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-08-08 18:19:25"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0!==o){const a=new Date;o=864e5*o,t={value:t,expiry:a.getTime()+o};localStorage.setItem(e,JSON.stringify(t))}},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);const o=new Date;if(!(o.getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=a=>new Promise((t,e)=>{const o=document.createElement("script");o.src=a,o.async=!0,o.onerror=e,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/custome/admonition.css"><link rel="stylesheet" href="/css/custome/tag-link.css"><link rel="stylesheet" href="/css/custome/heartbeat.min.css"><link rel="stylesheet" href="/css/custome/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="TheONE'Blog" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/head.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-code"></i><span> 编程</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/code/cpp/"><i class="fa-fw fa-brands fa-c"></i><span> C++</span></a></li><li><a class="site-page child" href="/categories/code/rust/"><i class="fa-fw fa-brands fa-rust"></i><span> Rust</span></a></li><li><a class="site-page child" href="/categories/code/java/"><i class="fa-fw fa-brands fa-java"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/code/swift/"><i class="fa-fw fa-brands fa-swift"></i><span> Swift</span></a></li><li><a class="site-page child" href="/categories/code/python/"><i class="fa-fw fa-brands fa-python"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/categories/code/golang/"><i class="fa-fw fa-brands fa-golang"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/code/javascript/"><i class="fa-fw fa-brands fa-js-square"></i><span> JavaScript</span></a></li><li><a class="site-page child" href="/categories/code/bible/"><i class="fa-fw fas fa-book"></i><span> 内功修炼</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chart-pie"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/web/html/"><i class="fa-fw fas fa-html5"></i><span> HTML</span></a></li><li><a class="site-page child" href="/categories/web/css/"><i class="fa-fw fas fa-css3"></i><span> CSS</span></a></li><li><a class="site-page child" href="/categories/web/vue/"><i class="fa-fw fa-brands fa-vuejs"></i><span> Vue</span></a></li><li><a class="site-page child" href="/categories/web/react/"><i class="fa-fw fa-brands fa-react"></i><span> React</span></a></li><li><a class="site-page child" href="/categories/web/tools/"><i class="fa-fw fa-brands fa-npm"></i><span> 工具链</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-brain"></i><span> 算法</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/algorithm/base/"><i class="fa-fw fas fa-apple-whole"></i><span> 基础算法</span></a></li><li><a class="site-page child" href="/categories/algorithm/base/"><i class="fa-fw fas fa-seedling"></i><span> 开源算法</span></a></li><li><a class="site-page child" href="/categories/algorithm/leetcode/"><i class="fa-fw fas fa-carrot"></i><span> 力扣刷题</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-buffer"></i><span> 虚拟化</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/hypervisor/kvm/"><i class="fa-fw fa-brands fa-osi"></i><span> KVM</span></a></li><li><a class="site-page child" href="/categories/hypervisor/vmware/"><i class="fa-fw fas fa-cubes"></i><span> Vmware</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-redhat"></i><span> 操作系统</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/os/linux/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> 基础知识</span></a></li><li><a class="site-page child" href="/categories/os/kernel/"><i class="fa-fw fa-brands fa-suse"></i><span> 内核探秘</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-app-store"></i><span> 应用服务</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/service/knowledge/"><i class="fa-fw fas fa-book-open"></i><span> 理论知识</span></a></li><li><a class="site-page child" href="/categories/service/install/"><i class="fa-fw fa-brands fa-octopus-deploy"></i><span> 服务安装</span></a></li><li><a class="site-page child" href="/categories/service/use/"><i class="fa-fw fas fa-ghost"></i><span> 服务使用</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-route"></i><span> 网络</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/network/basic/"><i class="fa-fw fas fa-network-wired"></i><span> 基础网络</span></a></li><li><a class="site-page child" href="/categories/network/protocol/"><i class="fa-fw fa-brands fa-cloudflare"></i><span> 协议学习</span></a></li><li><a class="site-page child" href="/categories/network/system/"><i class="fa-fw fa-brands fa-freebsd"></i><span> 系统实现</span></a></li><li><a class="site-page child" href="/categories/network/wireless/"><i class="fa-fw fas fa-wifi"></i><span> 无线网络</span></a></li><li><a class="site-page child" href="/categories/network/traffic/"><i class="fa-fw fa-brands fa-servicestack"></i><span> 流量分析</span></a></li><li><a class="site-page child" href="/categories/network/tools/"><i class="fa-fw fa-brands fa-optin-monster"></i><span> 网络工具</span></a></li><li><a class="site-page child" href="/categories/network/router/"><i class="fa-fw fa-brands fa-padlet"></i><span> 路由器</span></a></li><li><a class="site-page child" href="/categories/network/switch/"><i class="fa-fw fa-brands fa-phoenix-squadron"></i><span> 交换机</span></a></li><li><a class="site-page child" href="/categories/network/tcp/"><i class="fa-fw fa-brands fa-studiovinari"></i><span> TCP/IP</span></a></li><li><a class="site-page child" href="/categories/network/dpdk/"><i class="fa-fw fa-brands fa-pix"></i><span> DPDK</span></a></li><li><a class="site-page child" href="/categories/network/ipv6/"><i class="fa-fw fa-brands fa-pinterest-p"></i><span> IPV6</span></a></li><li><a class="site-page child" href="/categories/network/sdn/"><i class="fa-fw fa-brands fa-phoenix-framework"></i><span> SDN</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-lightbulb"></i><span> 云原生</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/native/docker/"><i class="fa-fw fa-brands fa-docker"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/native/kubernetes/"><i class="fa-fw fas fa-life-ring"></i><span> K8S</span></a></li><li><a class="site-page child" href="/categories/native/istio/"><i class="fa-fw fas fa-kaaba"></i><span> Istio</span></a></li><li><a class="site-page child" href="/categories/native/cicd/"><i class="fa-fw fas fa-gear"></i><span> CI/CD</span></a></li><li><a class="site-page child" href="/categories/native/solution/"><i class="fa-fw fas fa-compass"></i><span> 解决方案</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-database"></i><span> 数据库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/database/mysql/"><i class="fa-fw fas fa-otter"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/database/mongo/"><i class="fa-fw fas fa-leaf"></i><span> Mongo</span></a></li><li><a class="site-page child" href="/categories/database/postgresql/"><i class="fa-fw fas fa-hippo"></i><span> Postgre</span></a></li><li><a class="site-page child" href="/categories/database/postgresql/"><i class="fa-fw fas fa-memory"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-empire"></i><span> ELK</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/elk/apm/"><i class="fa-fw fa-brands fa-earlybirds"></i><span> APM</span></a></li><li><a class="site-page child" href="/categories/elk/kibana/"><i class="fa-fw fa-brands fa-earlybirds"></i><span> Kibana</span></a></li><li><a class="site-page child" href="/categories/elk/elstic/"><i class="fa-fw fa-brands fa-grunt"></i><span> Elastic</span></a></li><li><a class="site-page child" href="/categories/elk/logstash/"><i class="fa-fw fa-brands fa-hornbill"></i><span> Logstash</span></a></li><li><a class="site-page child" href="/categories/elk/filebeat/"><i class="fa-fw fa-brands fa-mailchimp"></i><span> Filebeat</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-satellite"></i><span> 硬件</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/hardware/cpu/"><i class="fa-fw fas fa-microchip"></i><span> CPU</span></a></li><li><a class="site-page child" href="/categories/hardware/idea/"><i class="fa-fw fas fa-gamepad"></i><span> 折腾</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-cannabis"></i><span> 成长</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/growth/summary/"><i class="fa-fw fas fa-volcano"></i><span> 学习总结</span></a></li><li><a class="site-page child" href="/categories/growth/life/"><i class="fa-fw fas fa-feather"></i><span> 生活记录</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">TheONE'Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-code"></i><span> 编程</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/code/cpp/"><i class="fa-fw fa-brands fa-c"></i><span> C++</span></a></li><li><a class="site-page child" href="/categories/code/rust/"><i class="fa-fw fa-brands fa-rust"></i><span> Rust</span></a></li><li><a class="site-page child" href="/categories/code/java/"><i class="fa-fw fa-brands fa-java"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/code/swift/"><i class="fa-fw fa-brands fa-swift"></i><span> Swift</span></a></li><li><a class="site-page child" href="/categories/code/python/"><i class="fa-fw fa-brands fa-python"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/categories/code/golang/"><i class="fa-fw fa-brands fa-golang"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/code/javascript/"><i class="fa-fw fa-brands fa-js-square"></i><span> JavaScript</span></a></li><li><a class="site-page child" href="/categories/code/bible/"><i class="fa-fw fas fa-book"></i><span> 内功修炼</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chart-pie"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/web/html/"><i class="fa-fw fas fa-html5"></i><span> HTML</span></a></li><li><a class="site-page child" href="/categories/web/css/"><i class="fa-fw fas fa-css3"></i><span> CSS</span></a></li><li><a class="site-page child" href="/categories/web/vue/"><i class="fa-fw fa-brands fa-vuejs"></i><span> Vue</span></a></li><li><a class="site-page child" href="/categories/web/react/"><i class="fa-fw fa-brands fa-react"></i><span> React</span></a></li><li><a class="site-page child" href="/categories/web/tools/"><i class="fa-fw fa-brands fa-npm"></i><span> 工具链</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-brain"></i><span> 算法</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/algorithm/base/"><i class="fa-fw fas fa-apple-whole"></i><span> 基础算法</span></a></li><li><a class="site-page child" href="/categories/algorithm/base/"><i class="fa-fw fas fa-seedling"></i><span> 开源算法</span></a></li><li><a class="site-page child" href="/categories/algorithm/leetcode/"><i class="fa-fw fas fa-carrot"></i><span> 力扣刷题</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-buffer"></i><span> 虚拟化</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/hypervisor/kvm/"><i class="fa-fw fa-brands fa-osi"></i><span> KVM</span></a></li><li><a class="site-page child" href="/categories/hypervisor/vmware/"><i class="fa-fw fas fa-cubes"></i><span> Vmware</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-redhat"></i><span> 操作系统</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/os/linux/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> 基础知识</span></a></li><li><a class="site-page child" href="/categories/os/kernel/"><i class="fa-fw fa-brands fa-suse"></i><span> 内核探秘</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-app-store"></i><span> 应用服务</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/service/knowledge/"><i class="fa-fw fas fa-book-open"></i><span> 理论知识</span></a></li><li><a class="site-page child" href="/categories/service/install/"><i class="fa-fw fa-brands fa-octopus-deploy"></i><span> 服务安装</span></a></li><li><a class="site-page child" href="/categories/service/use/"><i class="fa-fw fas fa-ghost"></i><span> 服务使用</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-route"></i><span> 网络</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/network/basic/"><i class="fa-fw fas fa-network-wired"></i><span> 基础网络</span></a></li><li><a class="site-page child" href="/categories/network/protocol/"><i class="fa-fw fa-brands fa-cloudflare"></i><span> 协议学习</span></a></li><li><a class="site-page child" href="/categories/network/system/"><i class="fa-fw fa-brands fa-freebsd"></i><span> 系统实现</span></a></li><li><a class="site-page child" href="/categories/network/wireless/"><i class="fa-fw fas fa-wifi"></i><span> 无线网络</span></a></li><li><a class="site-page child" href="/categories/network/traffic/"><i class="fa-fw fa-brands fa-servicestack"></i><span> 流量分析</span></a></li><li><a class="site-page child" href="/categories/network/tools/"><i class="fa-fw fa-brands fa-optin-monster"></i><span> 网络工具</span></a></li><li><a class="site-page child" href="/categories/network/router/"><i class="fa-fw fa-brands fa-padlet"></i><span> 路由器</span></a></li><li><a class="site-page child" href="/categories/network/switch/"><i class="fa-fw fa-brands fa-phoenix-squadron"></i><span> 交换机</span></a></li><li><a class="site-page child" href="/categories/network/tcp/"><i class="fa-fw fa-brands fa-studiovinari"></i><span> TCP/IP</span></a></li><li><a class="site-page child" href="/categories/network/dpdk/"><i class="fa-fw fa-brands fa-pix"></i><span> DPDK</span></a></li><li><a class="site-page child" href="/categories/network/ipv6/"><i class="fa-fw fa-brands fa-pinterest-p"></i><span> IPV6</span></a></li><li><a class="site-page child" href="/categories/network/sdn/"><i class="fa-fw fa-brands fa-phoenix-framework"></i><span> SDN</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-lightbulb"></i><span> 云原生</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/native/docker/"><i class="fa-fw fa-brands fa-docker"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/native/kubernetes/"><i class="fa-fw fas fa-life-ring"></i><span> K8S</span></a></li><li><a class="site-page child" href="/categories/native/istio/"><i class="fa-fw fas fa-kaaba"></i><span> Istio</span></a></li><li><a class="site-page child" href="/categories/native/cicd/"><i class="fa-fw fas fa-gear"></i><span> CI/CD</span></a></li><li><a class="site-page child" href="/categories/native/solution/"><i class="fa-fw fas fa-compass"></i><span> 解决方案</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-database"></i><span> 数据库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/database/mysql/"><i class="fa-fw fas fa-otter"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/database/mongo/"><i class="fa-fw fas fa-leaf"></i><span> Mongo</span></a></li><li><a class="site-page child" href="/categories/database/postgresql/"><i class="fa-fw fas fa-hippo"></i><span> Postgre</span></a></li><li><a class="site-page child" href="/categories/database/postgresql/"><i class="fa-fw fas fa-memory"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-brands fa-empire"></i><span> ELK</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/elk/apm/"><i class="fa-fw fa-brands fa-earlybirds"></i><span> APM</span></a></li><li><a class="site-page child" href="/categories/elk/kibana/"><i class="fa-fw fa-brands fa-earlybirds"></i><span> Kibana</span></a></li><li><a class="site-page child" href="/categories/elk/elstic/"><i class="fa-fw fa-brands fa-grunt"></i><span> Elastic</span></a></li><li><a class="site-page child" href="/categories/elk/logstash/"><i class="fa-fw fa-brands fa-hornbill"></i><span> Logstash</span></a></li><li><a class="site-page child" href="/categories/elk/filebeat/"><i class="fa-fw fa-brands fa-mailchimp"></i><span> Filebeat</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-satellite"></i><span> 硬件</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/hardware/cpu/"><i class="fa-fw fas fa-microchip"></i><span> CPU</span></a></li><li><a class="site-page child" href="/categories/hardware/idea/"><i class="fa-fw fas fa-gamepad"></i><span> 折腾</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-cannabis"></i><span> 成长</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/growth/summary/"><i class="fa-fw fas fa-volcano"></i><span> 学习总结</span></a></li><li><a class="site-page child" href="/categories/growth/life/"><i class="fa-fw fas fa-feather"></i><span> 生活记录</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">PowerDNS Recursor配置文件</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-08T10:30:10.000Z" title="发表于 2024-08-08 18:30:10">2024-08-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-08T10:19:25.613Z" title="更新于 2024-08-08 18:19:25">2024-08-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/service/">service</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/service/use/">use</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="PowerDNS Recursor配置文件"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p><script src="/assets/asciinema-player.js"></script><link rel="stylesheet" type="text/css" href="/assets/asciinema-player.css"></p><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>最近要开发多数据中心DNS管理平台，目前公司选型使用的是<code>PowerDNS</code>。每个数据中心都部署了一套<code>PowerDNS Recursor</code>，另外部分数据中心部署了<code>PowerDNS Authoritative</code>。其中多个数据中心可能会共用一套<code>Authoritative</code>。 首先简单看了一下Recursor配置，发现配置参数还是挺多的。本着工于利其事，必先利其器的原则，本文章对PowerDNS中的所有参数做了一遍梳理，方便后续开发中使用。</p><h2 id="环境信息"><a href="#环境信息" class="headerlink" title="环境信息"></a>环境信息</h2><div class="note orange icon-padding flat"><i class="note-icon fas fa-hand-scissors"></i><ol><li>PowerDNS Recursor: 4.1.16</li><li>CentOS: CentOS Linux release 7.9.2009 (Core)</li></ol></div><h2 id="参数配置"><a href="#参数配置" class="headerlink" title="参数配置"></a>参数配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">所有配置信息可以参考: https://doc.powerdns.com/recursor/yamlsettings.html<span class="comment">#setting-yaml-recursor-config-name</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置后知允许指定子网访问该服务，多个子网之间使用, 分隔</span></span><br><span class="line">allow-from=0.0.0.0/0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置后只允许指定文件中声明的子网访问该服务</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">allow-from-file=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">any-to-tcp可选项为:<span class="built_in">yes</span>|no, 当设置为<span class="built_in">yes</span>时，接受到的任何UDP查询都会转换为TCP查询。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当设置为no时，DNS查询首先通过UDP方式，如果响应大于512字节，客户端会自动使用TCP。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">any-to-tcp=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-config-dir用于指定API文件的配置目录</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-config-dir=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-key用于配置REST API的访问密钥</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-key=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-logfile用于记录REST API请求的日志信息</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-logfile=/var/log/pdns.log</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-readonly是否设置REST API为只读权限，可选项为:<span class="built_in">yes</span>|no</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">api-readonly=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">auth-zones用于指定权威解析的域名，指定权威域名后不再进行递归解析，相当于让</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Recursor充当权威DNS服务器作用。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">auth-zones=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">carbon-interval指定域名查询统计数据发送到Carbon的时间间隔，主要用来监控性能,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Carbon 是 Graphite 监控系统的组件之一,Graphite 是一个开源的企业级监控工具。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">carbon-interval=30</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">carbon-ourname指定Metrics的前缀，在启用Carbon并且未指定前缀的情况下默认使用</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Hostname左右metrics前缀。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">carbon-ourname=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">carbon-server用于配置Carbon服务器地址，配置后Recursor将发送监控数据到Carbon中。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">carbon-server=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chroot</span>用于指定PowerDNS Recursor进程能够访问的目录，主要目的是为了减少安全风险，</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">即使攻击者获取到了进程的权限，也只能访问该目录中的文件(可以试想一下，假设攻击者</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">控制了进程，并通过进程执行了/bin/bash二进制文件，那么将是一件很危险的事情)。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chroot</span>=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">client-tcp-timeout指定客户端通过TCP连接到服务端的超时时间，该时间内未能完成TCP</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">连接或者没有任何数据传输，将会终止掉连接。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">client-tcp-timeout=2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">config-dir用于指定PowerDNS Recursor的配置文件目录。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">config-dir=/etc/pdns-recursor</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">config-name当同一服务器运行多个递归进程时，用于指定服务名称，该名称会重命名进程</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">名称。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">config-name=ptest</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cpu-map指定PowerDNS线程和CPU的映射关系，可以通过亲和性和线程映射极大的提高PowerDNS</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">性能(比如DPDK一般会设置CPU绑定),因为这样可以减少进程上下文切换。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cpu-map=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">daemon是否设置为守护进程运行</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">daemon=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">delegation-only指定哪些域名只接受委派，委派是指DNS不直接解析指定域名下子域的DNS请求，</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">而是将DNS</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># delegation-only=</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">disable-packetcache是否禁用数据包缓存，禁用后每次查询都会从新查询，但是可以保证结果最</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">新，但是同样会增加服务器负担。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">disable-packetcache=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">disable-real-memory-usage 是否禁用真实内存使用报告，主要用来调试和诊断，禁用后仍然会</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">报告内存占用，但是不准确。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">disable-real-memory-usage=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">disable-syslog 是否禁用syslog日志输出，当日志输出到其他目标中时，可以禁用此参数。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">disable-syslog=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">distribution-load-factor 控制查询分配给工作线程的负载因子，这个参数控制查询在不同线程</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">之间的分配方式，可以实现优化多线程下的工作负载。要开启该功能，pdns-distributes-queries</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数必须设置为<span class="built_in">yes</span>, 并且distribution-load-factor值必须大于0。比如当设置为1.25, 则每个线</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">程的工作负载不会超过平均负载的125%。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">distribution-load-factor=0.0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dnssec 域名系统安全扩展，可以实现验证DNS数据的完整性和真实性，防止DNS欺骗和篡改。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可选值为: off/process-no-validate (default)/process/log-fail/validate</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dnssec=process-no-validate</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dnssec-log-bogus 开启后可以记录伪造DNSSEC的日志。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dnssec-log-bogus=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dont-query 开启后可以阻止Recursor向以下的IP地址或子网目标发送DNS请求，主要实现避免向不</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">信任的DNS服务器发送查询请求。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dont-query=127.0.0.0/8, 10.0.0.0/8, 100.64.0.0/10, 169.254.0.0/16, 192.168.0.0/16, 172.16.0.0/12, ::1/128, fc00::/7, fe80::/10, 0.0.0.0/8, 192.0.0.0/24, 192.0.2.0/24, 198.51.100.0/24, 203.0.113.0/24, 240.0.0.0/4, ::/96, ::ffff:0:0/96, 100::/64, 2001:db8::/32</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-cache-limit-ttl 控制客户端子网(ECS)缓存的最大数量，ECS是一种DNS扩展，用于传递客户端子网</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">信息到权威服务器，以便权威服务器能够根据查询客户端子网根据地理位置或网络拓扑返回更合适的响应。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">比如使用1.1.1.1查询www.baidu.com的ip地址，大概率是要返回一个国外的IP地址，因为百度服务器在</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">全球大部分地方是否分布的，但是使用ECS后可以把客户端子网传递到权威服务器，权威服务器根据客户</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">端子网或网络拓扑返回一个最合适的IP地址，大概率是离客户端较近的国内IP地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-cache-limit-ttl=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv4-bits	在使用ECS时，用于控制向权威服务器发起请求中客户端子网的掩码长度，掩码值越小，则</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示的地址返回越大，客户端网络信息精密度越小，隐私保护越好。反之相反。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv4-bits=24</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv4-cache-bits 在使用ECS时，当返回目标数据时，对返回的数据做缓存，该参数主要是用来缓存子网</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">的掩码位数。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv4-cache-bits=24</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv6-bits	功能和ecs-ipv4-bits相似，但是适用于IPV6地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv6-bits=56</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv6-cache-bits 功能和ecs-ipv4-cache-bits相似，但是适用于IPV6地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-ipv6-cache-bits=56</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-scope-zero-address ECS中源长度为0时，发送到指定的权威服务器。这个可以和非0的ECS请求做区分，</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以提高DNS灵活性和可靠性，如果没有找到合适的地址，则回退到127.0.0.1。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ecs-scope-zero-address=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">edns-outgoing-bufsize	指定EDNS发送DNS响应的最大缓冲区大小，可以再不同的网络环境修改改参数大小</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用来更好的适配网络环境和客户端。(EDNS协议是对DNS协议的扩展，用于突破原始DNS协议限制，核心的目</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">的就是用来突破传统DNS消息大小512大小限制)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">edns-outgoing-bufsize=1680</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">edns-subnet-whitelist	指定启用EDNS公的子网或域名白名单</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">edns-subnet-whitelist=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">entropy-source 指定随机数源，在需要高质量随机数的安全功能(比如DNSSEC签名中)非常重要。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">entropy-source=/dev/urandom</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">etc-hosts-file 指定文件路径，该文件包含主机到IP地址的映射，类似于Unix系统中的/etc/hosts</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">文件，该文件中的记录会优先于递归查询。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">etc-hosts-file=/etc/hosts</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">export-etc-hosts 是否导入系统/etc/hosts中的文件使用，如果导入该文件，则Recursor会在查询DNS之前</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">优先尝试使用该文件解析。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">export-etc-hosts=off</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">export-etc-hosts-search-suffix 是否将以下后缀和/etc/hosts结合起来进行匹配查询，比如有一个域名:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">example.com, hosts中存在`192.0.2.1    server`的映射，当查询`server.example.com`时，Recursor将</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">返回192.0.2.1的结果。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">export-etc-hosts-search-suffix=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">forward-zones	Zones 指定特定域名使用特定的上游来解析特定的域名，格式为:域名=上游DNS。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">forward-zones=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">forward-zones-file 类似于forward-zones，但是存放在文件中。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">forward-zones-file=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">forward-zones-recurse	类似于forward-zones，但是不同的是forward-zones-recurse会把递归期望设置为</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1,并依赖转发的递归服务器完全解析。也就是说forward-zones-recurse会完全依赖上游DNS完全解析，不会</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">遵循子区域的委派规则，那什么是子区域的委派规则呢？在DNS系统中，域名的层次结构由顶级域名(比如.com)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">到次级域名(比如example.com),在到更下一级的子域名(比如sub.example.com)是逐层递归解析的，比如example.com</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">的权威域的区域中可以设置有一个NS记录，指向sub.example.com的权威服务器。正常情况下，Recursor拿到</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sub.example.com的权威服务器后继续请求该权威服务器，但是使用了forward-zones-recurse后，Recursor将</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">完全依赖上游DNS服务器来完成整个解析过程，只等待最终返回结果。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">forward-zones-recurse=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gettag-needs-edns-options 开启后，DNS查询会抽取EDNS选项,并传递到ednsoptions表中的gettag()钩子中。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gettag-needs-edns-options=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hint-file 指定根域名服务器地址的文件信息, 指定后将从文件载入根域名服务器。一般来说全球一共有13个</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">根域名服务器。每个根域名服务器由不用的运营商运营，每个运营商有多个分布式物理实例，一般通过任播技</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">术分布在全球。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hint-file=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">include-dir	指定额外配置文件目录，开启后Recursor会读取该目录中的*.conf文件，并加载文件中配置。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">include-dir=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">latency-statistic-size 指定统计多少个查询用来计算查询的平均延时。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">latency-statistic-size=10000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定本地监听的地址，可以直接使用IP，也可以使用IP:Port格式，使用`,`分隔多个监听的地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">local-address=127.0.0.1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">local-port 指定监听的端口，默认值是53。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">local-port=53</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">log-common-errors 当某些DNS查询错误发生比较频繁事，是否记录到日志中。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">log-common-errors=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">log-rpz-changes 添加或删除RPZ Zones时，使用Info级别来代替Debug记录日志。RPZ:响应策略区域是DNS服务器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">集成的功能，允许在DNS解析器在查询返回结果之前，根据定义的策略修改、阻止或重定向响应。RPZ一般的用途是</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安全和内容过滤，比如阻止已知的恶意域名劫持或将也定域名重定向到告警页面。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">log-rpz-changes=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">log-timestamp	是否在日志行中添加时间戳。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">log-timestamp=<span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">logging-facility 用于记录消息的设施。日志设施用途将消息分类，可以更好的管理和处理系统日志。设施是属于</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">syslog的一部分。可选项可以是:daemon, user, local0, local1 ,但是必须使用数字来代替上述的设施。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">logging-facility=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">loglevel 记录日志级别，级别越高，输出的日志越多，设置的值不要小于3。0 = emergency, 1 = alert, 2 = critical,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3 = error, 4 = warning, 5 = notice, 6 = info, 7 = debug, 如果仅用了quite选项，最小设置为6。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">loglevel=6</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">lowercase-outgoing 指定Recursor是否将用户查询信息转换为小写后再向外请求，如果设置为no, 用户查询域名使用了</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">大小写混合或者使用了`draft-vixie-dnsext-dns0x20-00`草案，PowerDNS会保留查询的大小写。但是不兼容的权威服务器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可能会返回错误的结果。使用<span class="built_in">yes</span>的话Recursor将查询中的请求数据转换为小写，然后发送给权威服务器，但是Recursor仍</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">然会保持大小写返回给客户端。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">lowercase-outgoing=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">lua-config-file 指定Lua脚本脚本用于扩展和定制PowerDNS的配置信息。该功能可以实现非常强大的功能，具体的使用方法</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以参考官方链接: https://doc.powerdns.com/recursor/lua-config/index.html。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">lua-config-file=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">lua-dns-script 指定Lua脚本，该Lua脚本可以修改Recursor的解析行为。为了实现该功能，PowerDNS必须内置Lua支持，目前</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">官方发布的版本已经提供了支持。使用方法参考官方文档: https://doc.powerdns.com/recursor/lua-scripting/index.html。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># lua-dns-script=</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-cache-entries 配置缓存中可以存储的最大条目数。合理的配置可以避免过多的内存资源占用，同时也可以保持合理的缓存</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命中。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-cache-entries=1000000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-cache-ttl	用于控制缓存目标在内存中保存的最长时间，但是是秒。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># max-cache-ttl=86400</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-mthreads	Mtasker最大的线程数量。MTasker是PowerDNS内部的并发库，允许DNS查询在多个线程之间并行处理，可以提高</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PowerDNS的吞吐量。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-mthreads=2048</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-negative-ttl 指定缓存中存储否定响应(即NXDOMAIN和NODATA)的最大生成时间，这种设置可以减少不可解析域名的重复查询。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">但是也不要设置过大，过大的设置容易导致否定响应在内存中滞留过久。在目标域名发生变化时导致更新不及时或不准确。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-negative-ttl=3600</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-ns-address-qperq	限制单次查询中对每个NS查询数量，比如配置了3，一个域名反了两个NS地址，那么PowerDNS最多会对每个</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">NS查询3次。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-ns-address-qperq=10</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-packetcache-entries 配置packetcache中最大的缓存条目数量。Packet Cache和Record Cache和Negative Cache不同的</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">是缓存粒度不同，Packet Chache缓存完整的DNS响应包。注意缓存包是上游返回的响应包。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-packetcache-entries=500000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-qperq 限制每个查询中产生的最大查询次数，防止递归过程中生成过多的查询，避免资源滥用和潜在的Dos攻击。备注一下:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">上面讲到了DNS查询是逐级查询的，所以单次查询一个目标，可能会生成多次额外的查询才能查询到最终结果。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-qperq=50</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-recursion-depth 限制单次查询中递归的最大深度，0表示无限制。递归查询是指只当查询DNS记录时，由于查询不是发生在</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">权威服务器上的，而是依赖上游逐级查询不同级别权威服务器，直到获得最终的DNS记录。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-recursion-depth=40</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-tcp-clients 限制同时处理的最大的TCP客户端连接数。虽然大部分DNS查询都是使用UDP协议查询的，但是某些情况下还是需要</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">依赖TCP协议进行传输。比如响应数据过大，或者特定的DNS客户端要求使用TCP进行传输。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-tcp-clients=128</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-tcp-per-client 限制单个客户端可以建立最大的TCP连接数(是否为同一客户端的判断标准是IP地址)。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-tcp-per-client=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-tcp-queries-per-connection 限制单个TCP连接可以处理的最大DNS查询次数，主要可以实现单个TCP连接占用过多的资源。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-tcp-queries-per-connection=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-total-msec 限制每个查询允许占用的最大总时间，主要用来防止单个查询消耗过多的时间，保持DNS服务器能高负载性。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-total-msec=7000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-udp-queries-per-round 限制recvmsg()单轮循环中UDP DNS查询的最大数量，这个配置有助于在高负载的情况下，防止处理过多</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">的UDP查询导致忽略其他重要的任务，比如调度新线程，处理来自于权威服务器响应或者响应rec_control请求。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">max-udp-queries-per-round=10000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">minimum-ttl-override 用来强制设置DNS记录TTL指定的最小值,当设置的值大于1时虽然违反RFC标准，但在某些情况下会提升</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">性能，在设置为0的情况下，TTL为0的DNS记录会对性能产生巨大的影响，因为Recursor每次解析请求时都会重新请求权威服务器。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">minimum-ttl-override=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">network-timeout 等待远程权威服务器响应的超时时间，单位为毫秒。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">network-timeout=1500</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">no-shuffle 控制DNS响应返回的记录是否随机排序，该选项主要用来做回归测试，不要修改这个值。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">no-shuffle=off</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">non-local-bind 即使系统中不存在指定的IP地址，Recursor也会绑定的该地址,该选项主要实现IP故障转移。该选项有可能会掩盖配置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">问题，默认情况下是禁用的。如何要启用该功能，必须开启套接字允许绑定非本地地址选项。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">non-local-bind=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nsec3-max-iterations 指定NSEC3允许的最大迭代次数，入伙疏导包含更多迭代NSEC3记录的响应，则DNSSEC验证状态将会被</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">视为不安全。这里介绍一下DNSSEC: 普通的DNS请求是基于无状态的UDP协议，并且不会对响应结果进行检查，这样就会出现容</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">易被攻击的情况。DNSSEC就是对返回的结果做Validation. 具体的流程我会在新的文章中介绍。在没有记录的返回中,攻击者可</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">能会构造一个固定的NXDOMAIN就可以完成欺骗。NSEC3是为了解决不存在响应记录提出的规范: 当查询不到不存在的记录时，根</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">据字母顺序返回一条最近的记录，并biang资源指定为NSEC，并在响应记录中添加记录的RRSIG。基于NSEC3协议，攻击者可以完</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">成遍历所有域名。nsec3-max-iterations这个主要是用来指定最大迭代次数。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nsec3-max-iterations=2500</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packetcache-servfail-ttl 设置在packetcache中缓存解析失败响应的最大时间。单位为秒。注意在4.6.0版本之前，进ServFail</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">会被缓存，4.6.0开始所有状态码不是NoError和NXDomain的响应或者在响应中没有记录和权威信息都会被认为是失败。从4.9.0开</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">始，负面回答单独处理，不会被认为是解析失败。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packetcache-servfail-ttl=60</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packetcache-ttl 指定缓存项在packetcahce中的最大缓存时间，单位为秒。需要注意的是，即使原始响应中TTL大于该指定值，也</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">会强制按照该指定值设置缓存时间。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packetcache-ttl=3600</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">pdns-distributes-queries 开启后Recursor将使用不同的线程箭头客户端套接字。并使用查询的哈希值选择合适的工作线程，如果</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">incoming.reuseport 没有均衡分配查询到多个工作线程，开启该功能应该能提高性能。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">pdns-distributes-queries=<span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">processes 设置进程数量，目前处于实验性，不要改变该值。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">processes=1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">query-local-address 设置Recursor查询上游DNS服务器的本地源IP地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">query-local-address=0.0.0.0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">query-local-address6 设置Recursor查询上游DNS服务器的本地源IP地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">query-local-address6=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">quiet	开启后日志中不记录请求和响应</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">quiet=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">reuseport 是否开启SO_REUSEPORT选项来实现多个进程监听同一地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">reuseport=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">root-nx-trust	开启后当从根服务器接收到NXDOMAIN的响应时，这个NXDOMAIN响应将被视为整个顶级域不存在，意味着，对于该顶级域</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">的所有查询，递归器将不再继续查询，从而显著减少对根服务器的查询次数。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">root-nx-trust=<span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">security-poll-suffix	PowerDNS可以定时从官方secpoll.powerdns.com获取安全信息，可以通过security-poll-suffix修改默认域名。</span></span><br><span class="line">security-poll-suffix=</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">serve-rfc1918	设置RFC 1918私有IP地址权威性，减少对AS112查询。主要是作用就是屏蔽私有IP地址转发到上游公共DNS查询。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">serve-rfc1918=<span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">server-down-max-fails 如果上游服务器连续超时或者无法请求，在达到server-down-max-fails参数设置中的指定次数后，标记服务器为</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">宕机状态，可以设置为0关闭该功能。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># server-down-max-fails=64</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">server-down-throttle-time 如果服务器未以任何形式做出响应，则server-down-throttle-time参数可以设置指定秒内不再向其发送任何</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询，之后Recursor或尝试发送一个新的数据包，如果仍然没有收到任何响应。再次限制指定时间范围内发出请求。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">server-down-throttle-time=60</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">server-id 当查询包含NSID EDNS0选项时，返回server-id信息, 默认为当前主机名。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">server-id=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">setgid 设置后可以更改Recursor套接字的组ID，可以提升安全性。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">setgid=pdns-recursor</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">setuid 设置后可以更改Recursor套接字的用户ID，可以提升安全性。</span></span><br><span class="line">setuid=pdns-recursor</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">signature-inception-skew 设置DNSSEC签名的时间偏移，主要作用是控制验证DNSSEC签名时，允许的时间偏移量，从而保证签名在特定的时间</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">范围内仍然会被视为有效。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">signature-inception-skew=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">single-socket	开启后Recusor向上游查询使用单一Socket套接字。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># single-socket=off</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">snmp-agent 开启后Recursor将会注册到SNMP中，提供统计信息并发送相关问题。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">snmp-agent=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">snmp-master-socket 开启snmp-agent，设置snmp-master-socket提供给Recursor套接字信息告知如Recursor何注册到SNMP Master中.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">snmp-master-socket=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">soa-minimum-ttl SOA记录的TTL时间，不要修改此配置！！！！</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">soa-minimum-ttl=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-dir 用于管理的套接字和PID文件存贮未知，一般是/var/run或/run。RUNTIME_DIRECTOR环境变量存在值时，默认值会被该变量覆盖。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-dir=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-group 控制套接字的用户组，可以通过名称指定。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-group=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-mode	控制套接字的权限模式，使用八进制。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-mode=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-owner 控制套接字的用户，可以使用名称指定。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socket-owner=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">spoof-nearmiss-max spoof-nearmiss-max 参数用于控制 PowerDNS 在检测到错误 ID 的答案次数超过该设置值时，假定其正在遭受欺骗攻击。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这有助于防止 DNS 缓存投毒和其他形式的 DNS 欺骗攻击。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">spoof-nearmiss-max=20</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stack-size 设置每个线程的堆栈大小。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stack-size=200000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">statistics-interval 设置Recursor统计性能摘要时间间隔,0表示禁用。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">statistics-interval=1800</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stats-ringbuffer-entries 设置环形缓冲区大小，用来保存远程客户端查询Recursor的统计信息。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stats-ringbuffer-entries=10000</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tcp-fast-open	设置是否启用TCP快速打开功能。TCP 快速打开是一种用于减少客户端和服务器之间连接建立时间的技术，通过在初始 SYN 数据包中</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">包含数据，以减少握手延迟，从而加速连接建立过程。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tcp-fast-open=0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">threads 在Recursor启动时指定线程数量。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">threads=2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">trace	是否开启追溯，可选值为: no|<span class="built_in">yes</span>|fail, 注意开启后会生成大量的日志，会带来严重的性能问题，fail表示只记录ServFail日志，但是这种</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">情况仍然会带来较大的性能损耗。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">trace=off</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">udp-truncation-threshold EDNS0允许大型UDP响应数据报文，这种情况下可能会提升性能。但是大报文在反射攻击方面也有缺点，该参数用来指定可</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">接受报文的最大大小，最大是65535, 但是不要超过4096。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">udp-truncation-threshold=1680</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">use-incoming-edns-subnet 设置是否处理并将接收到的 EDNS Client Subnet (ECS) 信息传递给权威服务器, 开启后仍然依赖edns_subnet_allow_list</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数来决定是否发送，只有收到的ECS信息的网络掩码和域名在edns_subnet_allow_list，ECS信息才会被发送。此外如果ECS信息超过IPV4 ipv4_bits</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或IPV6 ipv6_bits的设置，信息会被截断。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">use-incoming-edns-subnet=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version-string 默认情况下Recursor使用版本号恢复<span class="string">&quot;version.bind&quot;</span>查询, 为了保证安全最好做修改。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version-string=PowerDNS Recursor 4.1.16</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver 是否开启用于REST API的webserver.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver=no</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-address webserver监听的IP地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-address=127.0.0.1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-allow-from	允许访问Webserver的子网或者IP地址。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-allow-from=127.0.0.1,::1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-password 设置Webserver的口令密码。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-password=</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-port 设置Webserver的监听端口</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webserver-port=8082</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write-pid 指定PID文件是否应该写入到socket_dir目录中。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write-pid=<span class="built_in">yes</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://theone.x-matrix.in">The One</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://theone.x-matrix.in/service/use/pdns/crecursor/">https://theone.x-matrix.in/service/use/pdns/crecursor/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://theone.x-matrix.in" target="_blank">TheONE'Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/PowerDNS/">PowerDNS</a><a class="post-meta__tags" href="/tags/Recursor/">Recursor</a><a class="post-meta__tags" href="/tags/Config/">Config</a></div><div class="post_share"><div class="social-share" data-image="/images/pdns-crecursor/cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/web/css/css/selector-tpseudo/"><img class="next-cover" src="/images/css/selector-tpseudo/cover.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CSS选择器4-目标伪类选择器</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/head.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">The One</div><div class="author-info__description">所谓选择，都是虚幻</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/MScuti"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/MScuti" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/img/wechat.webp" target="_blank" title="Wechat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="/img/telegram.webp" target="_blank" title="Telegram"><i class="fab fa-telegram"></i></a><a class="social-icon" href="https://twitter.com/bad_skyer" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="mailto:theone@theone.x-matrix.in" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">写在前面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF"><span class="toc-number">2.</span> <span class="toc-text">环境信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">参数配置</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/service/use/pdns/crecursor/" title="PowerDNS Recursor配置文件"><img src="/images/pdns-crecursor/cover.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="PowerDNS Recursor配置文件"></a><div class="content"><a class="title" href="/service/use/pdns/crecursor/" title="PowerDNS Recursor配置文件">PowerDNS Recursor配置文件</a><time datetime="2024-08-08T10:30:10.000Z" title="发表于 2024-08-08 18:30:10">2024-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/web/css/css/selector-tpseudo/" title="CSS选择器4-目标伪类选择器"><img src="/images/css/selector-tpseudo/cover.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CSS选择器4-目标伪类选择器"></a><div class="content"><a class="title" href="/web/css/css/selector-tpseudo/" title="CSS选择器4-目标伪类选择器">CSS选择器4-目标伪类选择器</a><time datetime="2023-04-12T12:37:19.000Z" title="发表于 2023-04-12 20:37:19">2023-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/web/css/css/selector-bpseudo/" title="CSS选择器3-动态伪类选择器"><img src="/images/css/selector-bpseudo/cover.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CSS选择器3-动态伪类选择器"></a><div class="content"><a class="title" href="/web/css/css/selector-bpseudo/" title="CSS选择器3-动态伪类选择器">CSS选择器3-动态伪类选择器</a><time datetime="2023-04-11T15:02:13.000Z" title="发表于 2023-04-11 23:02:13">2023-04-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/web/css/css/selector-relation/" title="CSS选择器2-层次选择器"><img src="/images/css/selector-level/cover.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CSS选择器2-层次选择器"></a><div class="content"><a class="title" href="/web/css/css/selector-relation/" title="CSS选择器2-层次选择器">CSS选择器2-层次选择器</a><time datetime="2023-04-10T13:30:45.000Z" title="发表于 2023-04-10 21:30:45">2023-04-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/web/css/css/selector/" title="CSS选择器1-基本选择器"><img src="/images/css/selector/selector.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CSS选择器1-基本选择器"></a><div class="content"><a class="title" href="/web/css/css/selector/" title="CSS选择器1-基本选择器">CSS选择器1-基本选择器</a><time datetime="2023-04-09T14:40:12.000Z" title="发表于 2023-04-09 22:40:12">2023-04-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 <i id="heartbeat" class="fa fas fa-heartbeat"></i> The One</div><div class="framework-info"><span>Power By </span><a href="https://theone.x-matrix.in">The One</a><span class="footer-separator">|</span><span>Service On </span><a target="_blank" rel="noopener" href="https://github.com/">Github</a><span class="footer-separator">|</span><span>CDN By </span><a target="_blank" rel="noopener" href="https://www.cloudflare.com/">CloudFlare</a></div><div class="footer_custom_text">自由 免费 突破 共享</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>function addGitalkSource(){const t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css",document.getElementsByTagName("head")[0].appendChild(t)}function loadGitalk(){function t(){new Gitalk(Object.assign({clientID:"7b5904f2584cd30eef8b",clientSecret:"672f46efe88bf38748fbba1c07b0ad69eada2ce5",repo:"theone.github.io",owner:"fireunix-blog",admin:["MScuti"],id:"23986cbf8364c3166819963d0420d8ce",updateCountCallback:commentCount},null)).render("gitalk-container")}"function"==typeof Gitalk?t():(addGitalkSource(),getScript("https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js").then(t))}function commentCount(t){let e=document.querySelector("#post-meta .gitalk-comment-count");e&&(e.innerHTML=t)}function loadOtherComment(){loadGitalk()}btf.loadComment(document.getElementById("gitalk-container"),loadGitalk)</script></div><script defer src="/js/custome/jquery.min.js"></script><script defer src="/js/custome/issues.min.js"></script><script defer src="/js/sakura.js"></script><script src="//code.tidio.co/ac59yq4zjakbqlob1libt6o4oqihaexr.js" async></script><script>function onTidioChatApiReady(){window.tidioChatApi.hide(),window.tidioChatApi.on("close",function(){window.tidioChatApi.hide()})}window.tidioChatApi?window.tidioChatApi.on("ready",onTidioChatApiReady):document.addEventListener("tidioChat-ready",onTidioChatApiReady);var chatBtnFn=()=>{document.getElementById("chat_btn").addEventListener("click",function(){window.tidioChatApi.show(),window.tidioChatApi.open()})};chatBtnFn()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script></body></html>